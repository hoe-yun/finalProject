<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.haribo.mapper.EmployeeMapper">

	<insert id="insertEmployee" parameterType="com.example.haribo.vo.Employee">
		<selectKey order="AFTER" resultType="Integer" keyProperty="employeeNo">
			SELECT last_insert_id();
		</selectKey>
	INSERT INTO employee( 
		branch_no,
		employee_id,
		employee_pw
	)	VALUES (
		#{branchNo}, 
		#{employeeId},
		PASSWORD(#{employeePw})
	)
	</insert>
	
	<insert id="insertEmployeeDetail" parameterType="com.example.haribo.vo.EmployeeDetail">
	INSERT INTO employee_detail(
		employee_no,
		employee_name,
		employee_gender,
		employee_phone,
		employee_email
	)	VALUES	(
		#{employeeNo},
		#{employeeName},
		#{employeeGender},
		#{employeePhone},
		#{employeeEmail}
	)
	</insert>
	
	<select id="idCkEmp" parameterType="String" resultType="Integer">
		SELECT
			COUNT(employee_id)
		FROM employee
		WHERE employee_id = #{idCk}
	</select>
	
<select id="employeeList" parameterType="java.util.Map" resultType="java.util.Map">

    SELECT
      e.branch_no branchNo,
      ed.employee_name employeeName,
      ed.employee_phone employeePhone,
      ed.employee_gender employeeGender,
      ed.employee_email employeeEmail,
      e.createdate
    FROM employee e
    INNER JOIN employee_detail ed ON e.employee_no = ed.employee_no

</select>

	
	<select id="getTotalRow" resultType="int">
		SELECT COUNT(*)
		FROM employee e INNER JOIN employee_detail ed
		ON e.employee_no = ed.employee_no
	</select>
	
</mapper>